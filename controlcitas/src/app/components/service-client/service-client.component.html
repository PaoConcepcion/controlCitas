<ng-template #content let-modal>
    <div class="modal-header">
        <h4 class="modal-title">Agenda tu cita</h4>
        <button type="button" class="close" aria-label="Close" (click)="modal.dismiss('Cross click')">
                <span aria-hidden="true">&times;</span>
        </button>
    </div>
    <div class="modal-body">
        <form (ngSubmit)="newCita(citaForm.value)" [formGroup]="citaForm">
            <div class="row">
                <div class="col">
                    <label for="exampleInputemaill">{{strings.company}}</label>
                    <select  id="sucursal" class="form-control" formControlName="sucursal" (change)='getEmpleados(citaForm.value.sucursal, citaForm.value.dia)'>
                        <option *ngFor="let sucursal of sucursales" value="{{sucursal.id_sucursal}}">
                            {{sucursal.nombre}}
                        </option>
                    </select>
                    <div class="validation-error">
                        <ng-container *ngFor="let validation of validation_messages.sucursal">
                          <div *ngIf="citaForm.get('sucursal').hasError(validation.type) &&
                          (citaForm.get('sucursal').dirty || citaForm.get('sucursal').touched)">
                          {{validation.message}}
                          </div>
                        </ng-container>
                    </div>
                </div>
                <div class="col">
                    <label for="exampleInputemaill">{{strings.day}}</label>
                    <select  id="dia" class="form-control" formControlName="dia" (change)='getEmpleados(citaForm.value.sucursal, citaForm.value.dia)'>
                        <option *ngFor="let dia of dias" value="{{dia}}">
                            {{dia | titlecase }}
                        </option>
                    </select>
                    <div class="validation-error">
                        <ng-container *ngFor="let validation of validation_messages.dia">
                          <div *ngIf="citaForm.get('dia').hasError(validation.type) &&
                          (citaForm.get('dia').dirty || citaForm.get('dia').touched)">
                          {{validation.message}}
                          </div>
                        </ng-container>
                    </div>
                </div>
                <div class="col">
                    <label for="exampleInputemaill">{{strings.employee}}</label>
                    <select  id="empleado" class="form-control" formControlName="empleado">
                        <option *ngFor="let empleado of empleados" value="{{empleado.id_empleado}}">
                            {{empleado.nombre}}
                        </option>
                    </select>
                    <div class="validation-error">
                        <ng-container *ngFor="let validation of validation_messages.empleado">
                          <div *ngIf="citaForm.get('empleado').hasError(validation.type) &&
                          (citaForm.get('empleado').dirty || citaForm.get('empleado').touched)">
                          {{validation.message}}
                          </div>
                        </ng-container>
                    </div>
                </div>
                <div class="col">
                    <label for="exampleInputemaill">{{strings.hour}}</label>
                    <input type="time" class="form-control" formControlName="hora" id="hora">
                    <div class="validation-error">
                        <ng-container *ngFor="let validation of validation_messages.hora">
                          <div *ngIf="citaForm.get('hora').hasError(validation.type) &&
                          (citaForm.get('hora').dirty || citaForm.get('hora').touched)">
                          {{validation.message}}
                          </div>
                        </ng-container>
                    </div>
                </div>
            </div>

            <div *ngIf="citaForm.value.empleado">
                <mwl-calendar-day-view
                [viewDate]="viewDate"
                [events]="events"
                [dayStartHour]="startHour"
                [dayEndHour]="endHour"
                >
                </mwl-calendar-day-view>
            </div>
            
        </form>
    </div>
    <div class="modal-footer">
        <button type="button" class="btn btn-light" (click)="modal.close('Close click')">Cerrar</button>
    </div>
</ng-template>

<div class="container" *ngIf="this.service; else loading">
    <div class="row filtrar">
        <div class="card col-xs-12 col-sm-12 col-md-12 col-lg-12">
            <div class="card-body">
                <div class="row">
                    <div class="col-xs-12 col-sm-12 col-md-4 col-lg-4">
                        <div class="card" style="width: 22rem;">
                            <img class="card-img-top" [src]="'assets/'+this.service.imagen" alt="Card image cap"
                                onError="this.src='assets/no-image.jpg'">
                        </div>
                    </div>
                    <div class="col-xs-12 col-sm-12 col-md-8 col-lg-8">
                        <p class="top">{{this.service.nombre}}</p>
                        <!-- <div class="col text-center">
                            <small>{{item.nombre}}</small>
                        </div> -->
                        <hr>
                        <div class="row">
                            <div class="col ml-2">
                                <div class="container p-3 my-3 border">
                                    <p class="h5 text-left"> 
                                        <strong> Costo: </strong> 
                                        ${{this.service.costo}} 
                                    </p>
                                </div>
    
                                <hr>
                                <div class="container p-3 my-3 border">
                                    <p class="h5 text-left"> 
                                        <strong> Duracion: </strong> 
                                        {{this.service.duracion}} minutos
                                    </p>
                                </div>
    
                                <hr>
                                <div class="container p-3 my-3 border">
                                    <p class="h5 text-left"> 
                                        <strong> Descripcion: </strong> <br>
                                        {{this.service.descripcion}}
                                    </p>
                                </div>
                            </div>
                            
                        </div>
                        <div class="d-flex flex-row-reverse mt-4">
                            <div class="col-xs-4 col-sm-4 col-md-4 col-lg-4">
                                <button class="btn btn-outline-primary btn-block" (click)="openXl(content)">Agendar</button>
                                <!-- <a class="btn btn-outline-primary btn-block"
                                    [routerLink]="['/service-client',service.idservicio]">Agendar</a> -->
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<ng-template #loading>
    <div class="row text-center mt-5 pt-5 ">
        <div class="col ">
            <i class="fas fa-sync-alt fa-5x fa-spin "></i>
        </div>
    </div>
</ng-template>
