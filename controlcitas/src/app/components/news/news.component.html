<div class="form">
    <ngb-alert id="uno" type="success" (close)="cerrar('uno')">{{strings.alert19}}</ngb-alert>
    <form [formGroup]="newsForm" (ngSubmit)="newRegister(newsForm.value)" 
    class="col bg-light shadow-sm p-3 mb-5 rounded border">
        <h4 class="text-center">{{strings.new_notice}}</h4><br>
        <div class="row">
            <div class="col">
                <label class="col-2 col-form-label">{{strings.title}}</label>
                <input type="text" id="titulo" class="form-control" formControlName="titulo" 
                [(ngModel)]="new.titulo">
            </div>
        </div>
        <div class="validation-error">
            <ng-container *ngFor="let validation of validation_messages.titulo">
              <div *ngIf="newsForm.get('titulo').hasError(validation.type) &&
              (newsForm.get('titulo').dirty || newsForm.get('titulo').touched)">
              {{validation.message}}
              </div>
            </ng-container>
        </div>
        <div class="row">
            <div class="col">
                <label class="col-2 col-form-label">{{strings.description}}</label>
                <textarea type="text" id="descripcion" class="form-control" formControlName="descripcion" 
                [(ngModel)]="new.descripcion"></textarea>
            </div>
        </div>
        <div class="validation-error">
            <ng-container *ngFor="let validation of validation_messages.descripcion">
              <div *ngIf="newsForm.get('descripcion').hasError(validation.type) &&
              (newsForm.get('descripcion').dirty || newsForm.get('descripcion').touched)">
              {{validation.message}}
              </div>
            </ng-container>
          </div>
        <label class="col-2 col-form-label">{{strings.image}}</label>
        <input type="file" id="imagen" class="form-control" formControlName="imagen" [(ngModel)]="new.imagen"
        (change)="upload($event)">
        <div class="validation-error">
            <ng-container *ngFor="let validation of validation_messages.imagen">
              <div *ngIf="newsForm.get('imagen').hasError(validation.type) &&
              (newsForm.get('imagen').dirty || newsForm.get('imagen').touched)">
              {{validation.message}}
              </div>
            </ng-container>
        </div>
        <div *ngIf="preview" class="imagencita">
            <img [src]="preview" id="visualizacion" width="300px" alt="">
        </div>
        <br>
        <div class="boton">
            <button type="submit" id="registrar" class="btn btn-secondary" [disabled]="!newsForm.valid">
                {{strings.send}}
            </button>
        </div>
    </form>
    <br>
    <!-- tabla de noticias -->
    <div>
        <ngb-alert id="tres" type="danger" (close)="cerrar('tres')">{{strings.alert20}}</ngb-alert>
        <table class="table table-striped">
            <thead>
                <tr>
                    <th class="text-center">{{strings.id}}</th>
                    <th class="text-center">{{strings.title}}</th>
                    <th class="text-center">{{strings.description}}</th>
                    <th class="text-center">{{strings.image}}</th>
                    <th class="text-center">{{strings.options}}</th>
                </tr>
            </thead>
            <tbody>
                <tr class="text-center" *ngFor="let item of news; let i of index">
                    <td>{{item.id_noticia}}</td>
                    <td>{{item.titulo}}</td>
                    <td>{{item.descripcion}}</td>
                    <td><img style="width: 8rem;" src="../../assets/{{item.imagen}}" onError="this.src='../../assets/no-image.jpg'"></td>
                    <td class="text-center">
                        <button id="editar" class="btn btn-outline-success m-1" type="button"
                        (click)="getNew(item.id_noticia)">
                            <i class="fas fa-user-edit"></i>
                        </button>
                        <button id="eliminar" class="btn btn-outline-danger m-1" type="button"
                        (click)="deleteNews(item.id_noticia)">
                            <i class="fas fa-trash"></i>
                        </button>
                    </td>
                </tr>
            </tbody>
        </table>
    </div>
</div>